# 满浆率计算工具使用手册

## 工具简介

满浆率计算工具是一个基于计算机视觉技术的专业工具，用于自动计算瓷砖胶浆覆盖率。该工具支持多种二值化算法，能够准确识别胶浆区域并计算满浆率百分比。

## 主要功能

- **多算法支持**：提供全局阈值、Otsu、自适应阈值、K-means聚类、GrabCut交互式等多种二值化算法
- **瓷砖类型适配**：支持黑胶白砖和白胶黑砖两种常见类型
- **实时预览**：提供原图与处理结果的对比显示
- **结果保存**：支持结果图的保存和下载功能
- **精确计算**：自动计算满浆率并显示详细指标

## 使用步骤

### 1. 图像上传
- 点击左侧"上传图像"按钮
- 支持 JPG、PNG、BMP 格式
- 建议图像分辨率不低于 800x600 像素

### 2. 算法选择
根据图像特点选择合适的二值化算法：

#### **全局阈值**
- 适用于光照均匀、对比度明显的图像
- 可通过阈值滑块调节分割效果
- 推荐阈值范围：120-180

#### **Otsu算法**
- 自动选择最优阈值，无需手动调节
- 适用于双峰直方图的图像
- 对光照变化有一定适应性

#### **自适应阈值**
- 适用于光照不均匀的图像
- 根据局部区域特征自动调节阈值
- 参数值控制邻域大小（建议3-21的奇数）

#### **K-means聚类**
- 基于像素值聚类进行分割
- 适用于复杂纹理的图像
- 需要安装sklearn库

#### **GrabCut交互式**
- 需要用户手动绘制ROI区域
- 适用于复杂背景的精确分割
- 在画布上绘制矩形框选择目标区域

### 3. 参数调节
- 使用"阈值/参数调节"滑块微调算法参数
- 实时观察处理效果
- 根据结果调整到最佳状态

### 4. 瓷砖类型选择
- **黑胶白砖**：胶浆为黑色，瓷砖为白色
- **白胶黑砖**：胶浆为白色，瓷砖为黑色
- 系统会自动调整计算逻辑

### 5. 结果查看
- 查看原图与处理结果的对比
- 观察满浆率百分比指标
- 检查满浆掩码叠加效果

### 6. 结果保存
- **📥 下载结果图**：直接下载到本地默认下载文件夹
- **💾 保存到服务器**：保存到应用服务器temp目录
- 文件名格式：`原文件名_result_时间戳.jpg`

## 图像拍摄注意事项

### 📸 拍摄要求

1. **保持平行**
   - 拍摄时相机与砖面尽可能平行
   - 避免倾斜角度造成的透视变形
   - 提高计算精度和可靠性

2. **光线充足**
   - 确保拍摄光线明亮均匀
   - 避免胶面出现明显阴影
   - 推荐使用自然光或均匀的人工照明

3. **图像裁剪**
   - 输入图像必须经过裁剪处理
   - 确保图像仅包含砖的部分
   - 不要包含任何背景或其他物体
   - 边缘应紧贴砖的边界

### 🎯 最佳实践

- **分辨率**：建议使用800x600以上分辨率
- **格式**：推荐使用JPG格式，压缩质量85%以上
- **对比度**：确保胶浆与瓷砖有明显的颜色对比
- **清晰度**：避免模糊和运动模糊
- **完整性**：确保砖面完整，无遮挡

## 算法参数说明

| 算法 | 参数范围 | 推荐值 | 说明 |
|------|----------|--------|------|
| 全局阈值 | 0-255 | 120-180 | 数值越大，白色区域越少 |
| Otsu | 无需调节 | - | 自动计算最优阈值 |
| 自适应阈值 | 3-51(奇数) | 11-21 | 邻域大小，影响局部适应性 |
| K-means | 无需调节 | - | 自动聚类分割 |
| GrabCut | 无需调节 | - | 基于用户绘制的ROI |

## 常见问题解决

### Q1: 计算结果不准确怎么办？
- 检查图像是否符合拍摄要求
- 尝试不同的二值化算法
- 调整阈值参数
- 确认瓷砖类型选择正确

### Q2: 无法上传图像？
- 检查文件格式是否为JPG/PNG/BMP
- 确认文件大小不超过限制
- 检查文件是否损坏

### Q3: 处理速度慢？
- 适当降低图像分辨率
- 选择计算复杂度较低的算法
- 确保系统资源充足

### Q4: 下载功能不工作？
- 检查浏览器下载设置
- 确认浏览器允许下载
- 尝试右键另存为

## 技术支持

如遇到技术问题或需要功能改进建议，请联系开发团队。

---

**版本信息**：v1.0  
**更新日期**：2025年1月  
**适用平台**：Web浏览器（推荐Chrome、Firefox、Edge）